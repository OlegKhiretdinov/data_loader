# Загрузчик данных
##  Описание пакетов
__db__ - пакет для работы с базой данных. содержит два модуля - 
подключение к базе данных и запросы

__filestorage__ - Сервер раздающий файлы.

__utils__ - содержит два модуля - загрузчик данных и парсер

__web_app__ - веб интерфейс и обработчик запросов.

## Развёртывание и запуск
Есть два варианта запуска

### Запуск в Docker
1. В корне проекта создать файл .env и добавить переменные окружения ```POSTGRES_DB```
```POSTGRES_USER``` ```POSTGRES_PASSWORD``` ```HOST_PORT``` Подробнее о переменных и их назначении
в файле .env_EXAMPLE
2. Собрать и запустить образ
   ```shell
   docker compose build
   ```
   ```shell
   docker compose up
   ```

### Обычный запуск
Для обчного запуска необходимо:
* Python >= 3.10
* PostgerSQL >= 16
* Poetry >= 1.4

1. В корне проекта создать файл .env и добавить переменные окружения ```POSTGRES_DB```
```POSTGRES_USER``` ```POSTGRES_PASSWORD``` ```POSTGRES_PORT``` ```POSTGRES_HOST```
Подробнее о переменных и их назначении в файле .env_EXAMPLE
2. В корне проекта выполнить
   ```shell
   poetry install
   ```
3. Запустить приложение раздающее файлы
   ```shell
   mmake storage
   ```
4. Запустить приложение раздающее файлы
   ```shell
   mmake start_app
   ```

## Что дальше
По адресу http://0.0.0.0:5001 находиться сервер раздающий файлы.
Открыв этот адрес в браузере увидите список url файлов ддоступных для скачивания.
Чтобы добавить свои файлы на сервер, скопируйте их в file_storage/data/

По адресу http://0.0.0.0:5000 находиться форма для ввода url файла.
После отправки формы приложения скачает фай, проверит расширение, вычислит параметры 
и если всё хорошо запишет данные в базу.
